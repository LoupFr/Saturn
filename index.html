<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saturn</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: #e1e1e1;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container { max-width: 1000px; margin: 0 auto; position: relative; }
        
        .settings-btn {
            position: absolute;
            top: 50px;
            left: -10px;
            background: rgba(55, 65, 81, 0.95);
            border: 1px solid rgba(75, 85, 99, 0.3);
            border-radius: 50px;
            padding: 12px 18px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            backdrop-filter: blur(15px);
            z-index: 100;
            box-shadow: 0 4px 15px rgba(55, 65, 81, 0.3);
        }
        .settings-btn:hover {
            background: rgba(75, 85, 99, 0.95);
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 30px rgba(55, 65, 81, 0.5);
        }
        
        .discord-btn {
            position: absolute;
            top: 50px;
            right: -10px;
            background: rgba(88, 101, 242, 0.95);
            border: 1px solid rgba(88, 101, 242, 0.3);
            border-radius: 50px;
            padding: 12px 18px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            backdrop-filter: blur(15px);
            z-index: 100;
            box-shadow: 0 4px 15px rgba(88, 101, 242, 0.3);
        }
        .discord-btn:hover {
            background: rgba(88, 101, 242, 1);
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 30px rgba(88, 101, 242, 0.5);
        }
        
        .header { text-align: center; margin-bottom: 40px; }
        .header h1 { 
            font-size: 4rem; 
            margin-bottom: 15px; 
            color: white;
            text-shadow: 0 4px 12px rgba(0,0,0,0.5);
        }
        .header p { 
            font-size: 1.3rem; 
            opacity: 0.9;
            font-weight: 400;
        }
        
        .card { 
            background: rgba(40, 40, 40, 0.9);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid rgba(75, 85, 99, 0.3);
            backdrop-filter: blur(10px);
        }
        
        .btn {
            background: linear-gradient(135deg, rgb(87, 59, 246), rgb(94, 29, 216));
            color: white;
            border: none;
            border-radius: 10px;
            padding: 14px 28px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-block;
            text-decoration: none;
        }
        .btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(87, 59, 246, 0.5);
            background: linear-gradient(135deg, rgb(94, 29, 216), rgb(75, 20, 180));
        }
        .btn:disabled { 
            opacity: 0.5; 
            cursor: not-allowed; 
            transform: none; 
            box-shadow: none;
        }
        .btn-success {
            background: linear-gradient(135deg, rgb(16, 185, 162), rgb(5, 140, 150));
        }
        .btn-success:hover:not(:disabled) {
            background: linear-gradient(135deg, rgb(5, 140, 150), rgb(4, 120, 130));
            box-shadow: 0 10px 30px rgba(16, 185, 162, 0.5);
        }
        .btn-danger {
            background: linear-gradient(135deg, rgb(239, 68, 68), rgb(220, 38, 38));
        }
        .btn-danger:hover:not(:disabled) {
            background: linear-gradient(135deg, rgb(220, 38, 38), rgb(185, 28, 28));
            box-shadow: 0 10px 30px rgba(239, 68, 68, 0.5);
        }
        .btn-small {
            padding: 10px 20px;
            font-size: 14px;
        }
        
        .form-group { margin-bottom: 25px; }
        .form-group label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: #d1d5db;
            font-size: 1.1rem;
        }
        .input { 
            width: 100%;
            background: rgba(55, 65, 81, 0.8);
            border: 1px solid rgba(75, 85, 99, 0.5);
            border-radius: 10px;
            padding: 14px;
            color: #f3f4f6;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        .input:focus {
            outline: none;
            border-color: rgb(87, 59, 246);
            box-shadow: 0 0 0 3px rgba(87, 59, 246, 0.2);
        }
        
        .file-display {
            background: rgba(55, 65, 81, 0.8);
            border: 2px dashed #6b7280;
            border-radius: 16px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .file-display:hover { 
            border-color: rgb(87, 59, 246); 
            background: rgba(87, 59, 246, 0.1);
            transform: translateY(-2px);
        }
        .file-display.has-file { 
            border-color: rgb(16, 185, 162); 
            background: rgba(16, 185, 162, 0.1);
        }
        
        .quality-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .progress-container {
            background: rgba(55, 65, 81, 0.9);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 25px;
            display: none;
            border: 1px solid rgba(75, 85, 99, 0.3);
        }
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .progress-title { font-weight: 600; color: #f3f4f6; font-size: 1.1rem; }
        .progress-stats { font-size: 1rem; color: rgb(87, 59, 246); font-weight: 600; }
        .progress-bar {
            width: 100%;
            height: 12px;
            background: #374151;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 12px;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, rgb(87, 59, 246), rgb(94, 29, 216));
            border-radius: 6px;
            width: 0%;
            transition: width 0.4s ease;
        }
        .progress-text {
            text-align: center;
            font-weight: 500;
            color: #d1d5db;
            font-size: 0.95rem;
        }
        
        .results { display: none; }
        .clips-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }
        .clips-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #f9fafb;
        }
        .clips-actions {
            display: flex;
            gap: 12px;
        }
        .clips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        .clip-card {
            background: rgba(55, 65, 81, 0.9);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(75, 85, 99, 0.3);
            transition: all 0.3s ease;
        }
        .clip-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            border-color: rgba(87, 59, 246, 0.5);
        }
        .clip-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .clip-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #f3f4f6;
        }
        .clip-duration {
            background: rgba(87, 59, 246, 0.2);
            color: rgb(87, 59, 246);
            border: 1px solid rgba(87, 59, 246, 0.3);
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 0.85rem;
            font-weight: 500;
        }
        .clip-info {
            margin-bottom: 15px;
            font-size: 0.9rem;
            color: #9ca3af;
            line-height: 1.5;
        }
        .clip-actions { 
            display: flex; 
            gap: 8px; 
        }
        .clip-actions .btn { 
            flex: 1;
            text-align: center;
            justify-content: center;
        }
        
        .status { 
            padding: 16px 20px; 
            border-radius: 12px; 
            margin-bottom: 20px;
            display: none;
            font-weight: 500;
            backdrop-filter: blur(10px);
        }
        .status.success { 
            background: rgba(16, 185, 162, 0.2); 
            color: rgb(16, 185, 162);
            border: 1px solid rgba(16, 185, 162, 0.3);
        }
        .status.error { 
            background: rgba(239, 68, 68, 0.2); 
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        .status.info { 
            background: rgba(87, 59, 246, 0.2); 
            color: rgb(87, 59, 246);
            border: 1px solid rgba(87, 59, 246, 0.3);
        }
        
        .language-selector {
            position: fixed;
            bottom: 25px;
            right: 25px;
            z-index: 1000;
        }
        .language-btn {
            background: rgba(40, 40, 40, 0.95);
            border: 1px solid rgba(75, 85, 99, 0.5);
            border-radius: 50px;
            padding: 12px 18px;
            color: #e1e1e1;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            backdrop-filter: blur(15px);
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        .language-btn:hover {
            background: rgba(55, 65, 81, 0.95);
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.4);
        }
        .language-dropdown {
            position: absolute;
            bottom: 110%;
            right: 0;
            background: rgba(40, 40, 40, 0.98);
            border: 1px solid rgba(75, 85, 99, 0.5);
            border-radius: 16px;
            padding: 12px;
            margin-bottom: 10px;
            backdrop-filter: blur(20px);
            display: none;
            min-width: 200px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
        .language-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 14px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
            font-weight: 500;
        }
        .language-option:hover { 
            background: rgba(55, 65, 81, 0.8); 
        }
        .language-option.active { 
            background: rgba(87, 59, 246, 0.3); 
            color: rgb(87, 59, 246);
        }
        
        /* PAGE PARAMÈTRES */
        .settings-page {
            display: none;
        }
        
        .settings-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 40px;
        }
        .settings-header h1 {
            font-size: 2.5rem;
            color: white;
        }
        
        .settings-section {
            background: rgba(40, 40, 40, 0.9);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid rgba(75, 85, 99, 0.3);
        }
        .settings-section h3 {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: #f3f4f6;
        }
        
        .version-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .version-card {
            background: rgba(55, 65, 81, 0.8);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(75, 85, 99, 0.3);
        }
        .version-card h4 {
            color: rgb(87, 59, 246);
            margin-bottom: 10px;
        }
        .version-card p {
            color: #d1d5db;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        .changelog {
            background: rgba(55, 65, 81, 0.6);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid rgb(87, 59, 246);
            max-height: 300px;
            overflow-y: auto;
        }
        .changelog h4 {
            color: #f3f4f6;
            margin-bottom: 15px;
        }
        .changelog ul {
            color: #d1d5db;
            padding-left: 20px;
        }
        .changelog li {
            margin-bottom: 8px;
            line-height: 1.4;
        }
        
        .update-section {
            text-align: center;
            padding: 20px;
        }
        .update-status {
            margin: 20px 0;
            font-size: 1.1rem;
        }
        
        .danger-zone {
            border: 2px solid rgba(239, 68, 68, 0.3);
            background: rgba(239, 68, 68, 0.05);
        }
        .danger-zone h3 {
            color: rgb(239, 68, 68);
        }
        
        .footer-credits {
            margin-top: 60px;
            padding: 20px;
            text-align: center;
            font-size: 0.75rem;
            opacity: 0.4;
            line-height: 1.4;
            color: #9ca3af;
            border-top: 1px solid rgba(75, 85, 99, 0.2);
        }
        .footer-credits a {
            color: inherit;
            text-decoration: none;
        }
        .footer-credits a:hover {
            opacity: 0.8;
        }
        
        @media (max-width: 768px) {
            .container { padding: 10px; }
            .header h1 { font-size: 3rem; }
            .quality-grid { grid-template-columns: 1fr; }
            .clips-grid { grid-template-columns: 1fr; }
            .clips-header { flex-direction: column; align-items: stretch; }
            .clips-actions { justify-content: center; }
            .card { padding: 20px; }
            .discord-btn, .settings-btn {
                position: static;
                margin-bottom: 20px;
                align-self: flex-end;
            }
            .version-info { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- PAGE PRINCIPALE -->
        <div id="mainPage">
            <div class="settings-btn" onclick="showSettingsPage()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.82,11.69,4.82,12s0.02,0.64,0.07,0.94l-2.03,1.58c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
                </svg>
                <span id="settingsText">Settings</span>
            </div>
            
            <a href="https://discord.gg/qQHNQqSjJR" target="_blank" class="discord-btn">
                <svg width="20" height="20" viewBox="0 0 71 55" fill="currentColor">
                    <g clip-path="url(#clip0)">
                        <path d="m60.1045 4.8978c-3.5309-1.6127-7.2774-2.7907-11.2509-3.4581-0.4849 0.8649-1.0526 2.0519-1.4409 2.9877-4.2387-0.6347-8.4481-0.6347-12.6019 0-0.3883-0.9358-0.9731-2.1228-1.4653-2.9877-3.9735 0.6674-7.7364 1.8454-11.2509 3.4581-6.9764 10.4185-8.8789 20.5625-7.9441 30.5252 4.7809 3.5249 9.4198 5.6708 13.9712 7.0886 1.1267-1.5386 2.1307-3.1652 2.9877-4.8978-1.6351-0.6185-3.1979-1.3797-4.6869-2.2532 0.3883-0.2924 0.7766-0.5993 1.1485-0.9062 9.0609 4.1711 18.8815 4.1711 27.8035 0 0.3883 0.3069 0.7766 0.6138 1.1485 0.9062-1.489 0.8735-3.0518 1.6347-4.6869 2.2532 0.8570 1.7326 1.861 3.3592 2.9877 4.8978 4.5514-1.4178 9.1903-3.5637 13.9712-7.0886 1.1011-11.6906-1.8454-21.8346-7.9441-30.5252zm-27.4461 24.4776c-2.6418 0-4.8204-2.4285-4.8204-5.3849s2.1301-5.3849 4.8204-5.3849c2.6903 0 4.8689 2.4285 4.8204 5.3849 0 2.9564-2.1301 5.3849-4.8204 5.3849zm17.7677 0c-2.6418 0-4.8204-2.4285-4.8204-5.3849s2.1301-5.3849 4.8204-5.3849c2.6903 0 4.8689 2.4285 4.8204 5.3849 0 2.9564-2.1786 5.3849-4.8204 5.3849z"/>
                    </g>
                </svg>
                <span id="discordText">Join Community</span>
            </a>
            
            <div class="header">
                <h1>🪐 Saturn</h1>
                <p id="subtitle">Split your long videos into clips of determined duration</p>
            </div>

            <div id="status" class="status"></div>

            <div class="card">
                <div class="form-group">
                    <label id="selectVideoLabel">1. Select your video</label>
                    <div class="file-display" id="fileDisplay" onclick="selectVideo()">
                        <div style="text-align: center;">
                            <div style="font-size: 3.5rem; margin-bottom: 15px;">🎬</div>
                            <div style="font-size: 1.3rem; margin-bottom: 8px;" id="selectText">Click to select a video</div>
                            <div style="font-size: 1rem; opacity: 0.7;" id="formatsText">MP4, AVI, MKV, MOV, WebM...</div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label id="outputFolderLabel">2. Output folder</label>
                    <div style="display: flex; gap: 12px;">
                        <input type="text" id="outputPath" class="input" placeholder="Choose where to save..." readonly>
                        <button class="btn" onclick="selectOutputFolder()" id="browseBtn">📁 Browse</button>
                    </div>
                </div>

                <div class="form-group">
                    <label id="clipDurationLabel">3. Duration per clip (seconds)</label>
                    <input type="number" id="clipDuration" class="input" value="61" min="1" max="600">
                </div>

                <div class="form-group">
                    <label id="qualityLabel">4. Quality options</label>
                    <div class="quality-grid">
                        <div>
                            <label style="font-size: 14px; margin-bottom: 8px; display: block;" id="videoQualityLabel">Video quality</label>
                            <select id="videoQuality" class="input">
                                <option value="medium">🎯 Balanced (recommended)</option>
                                <option value="low">⚡ Fast (light files)</option>
                                <option value="high">💎 High quality</option>
                                <option value="max">🔥 Maximum (very heavy)</option>
                            </select>
                        </div>
                        <div>
                            <label style="font-size: 14px; margin-bottom: 8px; display: block;" id="resolutionLabel">Resolution</label>
                            <select id="resolution" class="input">
                                <option value="original">📺 Original</option>
                                <option value="1080p">🎬 1080p (Full HD)</option>
                                <option value="720p">📱 720p (HD)</option>
                                <option value="480p">💾 480p (compact)</option>
                            </select>
                        </div>
                        <div>
                            <label style="font-size: 14px; margin-bottom: 8px; display: block;" id="formatLabel">Output format</label>
                            <select id="outputFormat" class="input">
                                <option value="mp4">🎥 MP4 (universal)</option>
                                <option value="webm">🌐 WebM (smaller)</option>
                                <option value="avi">📼 AVI (classic)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div style="text-align: center;">
                    <button id="processBtn" class="btn" onclick="startProcessing()" disabled>
                        ⚡ <span id="processText">Split video</span>
                    </button>
                </div>
            </div>

            <div class="progress-container" id="progressContainer">
                <div class="progress-header">
                    <div class="progress-title" id="progressTitle">🪐 Saturn in action</div>
                    <div class="progress-stats" id="progressStats">0%</div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">Initializing...</div>
            </div>

            <div class="results" id="results">
                <div class="card">
                    <div class="clips-header">
                        <h2 class="clips-title" id="resultsTitle">✅ Clips generated</h2>
                        <div class="clips-actions">
                            <button class="btn btn-success" onclick="openOutputFolder()" id="openFolderBtn">📂 Open folder</button>
                            <button class="btn" onclick="resetApp()" id="newProjectBtn">🔄 New project</button>
                        </div>
                    </div>
                    <div class="clips-grid" id="clipsGrid"></div>
                </div>
            </div>
            
            <div class="footer-credits">
                <p><strong>Saturn v1.1.0</strong> - Video Splitter Tool</p>
                <p>Developed with Electron, Node.js and FFmpeg | Free and Open Source Software</p>
                <p>This software is provided "as is", without warranty of any kind. Use at your own risk.</p>
                <p>Saturn is not affiliated with any video platform or service. All trademarks belong to their respective owners.</p>
                <p>By using this software, you agree to comply with all applicable laws and regulations regarding video processing and distribution.</p>
                <p>Join our Discord community for support: <a href="https://discord.gg/qQHNQqSjJR" target="_blank">discord.gg/qQHNQqSjJR</a></p>
            </div>
        </div>

        <!-- PAGE PARAMÈTRES -->
        <div id="settingsPage" class="settings-page">
            <div class="settings-header">
                <button class="btn" onclick="showMainPage()" id="backBtn">← Back</button>
                <h1 id="settingsPageTitle">⚙️ Settings</h1>
            </div>

            <div class="settings-section">
                <h3 id="versionInfoTitle">📋 Version Information</h3>
                <div class="version-info">
                    <div class="version-card">
                        <h4 id="currentVersionTitle">Current Version</h4>
                        <p id="currentVersionText">Saturn v1.1.0</p>
                    </div>
                    <div class="version-card">
                        <h4 id="releaseInfoTitle">Release Info</h4>
                        <p id="releaseInfoText">Released: December 2024</p>
                    </div>
                </div>
                
                <div class="changelog">
                    <h4 id="changelogTitle">🆕 What's New in v1.1.0</h4>
                    <ul id="changelogList">
                        <li>✨ Added Settings page with version information</li>
                        <li>🔄 Integrated automatic update system</li>
                        <li>🗑️ Added uninstall feature with confirmation</li>
                        <li>📡 Added update check and download functionality</li>
                        <li>🎯 Improved user interface responsiveness</li>
                        <li>🐛 Fixed minor bugs and performance improvements</li>
                        <li>🔧 Enhanced error handling and user feedback</li>
                    </ul>
                </div>
            </div>

            <div class="settings-section">
                <h3 id="updateSectionTitle">🔄 Updates</h3>
                <div class="update-section">
                    <div id="updateStatus" class="update-status">
                        <p id="updateStatusText">Click to check for updates</p>
                    </div>
                    <button class="btn btn-success" onclick="checkForUpdates()" id="checkUpdateBtn">
                        🔍 <span id="checkUpdateText">Check for Updates</span>
                    </button>
                    <div id="updateProgress" class="progress-container" style="margin-top: 20px;">
                        <div class="progress-header">
                            <div class="progress-title" id="downloadTitle">Downloading Update...</div>
                            <div class="progress-stats" id="downloadStats">0%</div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="downloadFill"></div>
                        </div>
                        <div class="progress-text" id="downloadText">Preparing download...</div>
                    </div>
                </div>
            </div>

            <div class="settings-section danger-zone">
                <h3 id="dangerZoneTitle">⚠️ Danger Zone</h3>
                <div style="text-align: center; padding: 20px;">
                    <p id="uninstallWarning" style="margin-bottom: 20px; color: #d1d5db;">
                        This will completely remove Saturn from your computer. Your processed videos will not be deleted.
                    </p>
                    <button class="btn btn-danger" onclick="uninstallSaturn()" id="uninstallBtn">
                        🗑️ <span id="uninstallText">Uninstall Saturn</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="language-selector">
        <div class="language-btn" onclick="toggleLanguageDropdown()">
            <span id="currentLangFlag">🇬🇧</span>
            <span id="currentLangCode">EN</span>
        </div>
        <div class="language-dropdown" id="languageDropdown">
            <div class="language-option" onclick="changeLanguage('fr')">
                <span>🥐</span><span>Français</span>
            </div>
            <div class="language-option active" onclick="changeLanguage('en')">
                <span>🇬🇧</span><span>English</span>
            </div>
            <div class="language-option" onclick="changeLanguage('es')">
                <span>🌮</span><span>Español</span>
            </div>
            <div class="language-option" onclick="changeLanguage('it')">
                <span>🍕</span><span>Italiano</span>
            </div>
        </div>
    </div>

    <script>
        console.log('Saturn v1.1 chargé');
        
        const { ipcRenderer } = require('electron');

        const translations = {
            fr: {
                subtitle: "Découpez vos vidéos longues en clips d'une durée déterminée",
                selectVideo: "1. Sélectionnez votre vidéo",
                selectText: "Cliquez pour sélectionner une vidéo",
                formatsText: "MP4, AVI, MKV, MOV, WebM...",
                outputFolder: "2. Dossier de sortie",
                browse: "📁 Parcourir",
                chooseSave: "Choisissez où sauvegarder...",
                clipDuration: "3. Durée par clip (secondes)",
                quality: "4. Options de qualité",
                videoQuality: "Qualité vidéo",
                resolution: "Résolution",
                format: "Format de sortie",
                processText: "Découper la vidéo",
                progressTitle: "🪐 Saturn en action",
                resultsTitle: "✅ Clips générés",
                openFolder: "📂 Ouvrir le dossier",
                newProject: "🔄 Nouveau projet",
                clip: "Clip",
                play: "▶️ Lire",
                locate: "📂 Localiser",
                appReady: "🪐 Saturn prêt - Sélectionnez une vidéo pour commencer",
                videoAnalyzed: "✅ Vidéo analysée avec succès!",
                folderSelected: "✅ Dossier de sortie sélectionné!",
                processingComplete: "🎉 Découpage terminé!",
                analyzing: "🔍 Analyse de la vidéo...",
                error: "❌ Erreur:",
                clips: "clips créés avec Saturn",
                qualityMedium: "🎯 Équilibrée (recommandée)",
                qualityLow: "⚡ Rapide (fichiers légers)",
                qualityHigh: "💎 Haute qualité",
                qualityMax: "🔥 Maximum (très lourd)",
                resolutionOriginal: "📺 Originale",
                resolution1080p: "🎬 1080p (Full HD)",
                resolution720p: "📱 720p (HD)",
                resolution480p: "💾 480p (compact)",
                formatMp4: "🎥 MP4 (compatible partout)",
                formatWebm: "🌐 WebM (plus petit)",
                formatAvi: "📼 AVI (classique)",
                discordText: "Rejoindre la communauté",
                settingsText: "Paramètres",
                settingsPageTitle: "⚙️ Paramètres",
                backBtn: "← Retour",
                versionInfoTitle: "📋 Informations de version",
                currentVersionTitle: "Version actuelle",
                releaseInfoTitle: "Info de sortie",
                changelogTitle: "🆕 Nouveautés v1.1.0",
                updateSectionTitle: "🔄 Mises à jour",
                checkUpdateText: "Vérifier les mises à jour",
                dangerZoneTitle: "⚠️ Zone dangereuse",
                uninstallText: "Désinstaller Saturn",
                uninstallWarning: "Ceci supprimera complètement Saturn de votre ordinateur. Vos vidéos traitées ne seront pas supprimées."
            },
            en: {
                subtitle: "Split your long videos into clips of determined duration",
                selectVideo: "1. Select your video",
                selectText: "Click to select a video",
                formatsText: "MP4, AVI, MKV, MOV, WebM...",
                outputFolder: "2. Output folder",
                browse: "📁 Browse",
                chooseSave: "Choose where to save...",
                clipDuration: "3. Duration per clip (seconds)",
                quality: "4. Quality options",
                videoQuality: "Video quality",
                resolution: "Resolution",
                format: "Output format",
                processText: "Split video",
                progressTitle: "🪐 Saturn in action",
                resultsTitle: "✅ Clips generated",
                openFolder: "📂 Open folder",
                newProject: "🔄 New project",
                clip: "Clip",
                play: "▶️ Play",
                locate: "📂 Show",
                appReady: "🪐 Saturn ready - Select a video to start",
                videoAnalyzed: "✅ Video analyzed successfully!",
                folderSelected: "✅ Output folder selected!",
                processingComplete: "🎉 Processing complete!",
                analyzing: "🔍 Analyzing video...",
                error: "❌ Error:",
                clips: "clips created with Saturn",
                qualityMedium: "🎯 Balanced (recommended)",
                qualityLow: "⚡ Fast (light files)",
                qualityHigh: "💎 High quality",
                qualityMax: "🔥 Maximum (very heavy)",
                resolutionOriginal: "📺 Original",
                resolution1080p: "🎬 1080p (Full HD)",
                resolution720p: "📱 720p (HD)",
                resolution480p: "💾 480p (compact)",
                formatMp4: "🎥 MP4 (universal)",
                formatWebm: "🌐 WebM (smaller)",
                formatAvi: "📼 AVI (classic)",
                discordText: "Join Community",
                settingsText: "Settings",
                settingsPageTitle: "⚙️ Settings",
                backBtn: "← Back",
                versionInfoTitle: "📋 Version Information",
                currentVersionTitle: "Current Version",
                releaseInfoTitle: "Release Info",
                changelogTitle: "🆕 What's New in v1.1.0",
                updateSectionTitle: "🔄 Updates",
                checkUpdateText: "Check for Updates",
                dangerZoneTitle: "⚠️ Danger Zone",
                uninstallText: "Uninstall Saturn",
                uninstallWarning: "This will completely remove Saturn from your computer. Your processed videos will not be deleted."
            },
            es: {
                subtitle: "Corte sus videos largos en clips de duración determinada",
                selectVideo: "1. Selecciona tu video",
                selectText: "Haz clic para seleccionar un video",
                formatsText: "MP4, AVI, MKV, MOV, WebM...",
                outputFolder: "2. Carpeta de salida",
                browse: "📁 Examinar",
                chooseSave: "Elige dónde guardar...",
                clipDuration: "3. Duración por clip (segundos)",
                quality: "4. Opciones de calidad",
                videoQuality: "Calidad de video",
                resolution: "Resolución",
                format: "Formato de salida",
                processText: "Cortar video",
                progressTitle: "🪐 Saturn en acción",
                resultsTitle: "✅ Clips generados",
                openFolder: "📂 Abrir carpeta",
                newProject: "🔄 Nuevo proyecto",
                clip: "Clip",
                play: "▶️ Reproducir",
                locate: "📂 Mostrar",
                appReady: "🪐 Saturn listo - Selecciona un video para empezar",
                videoAnalyzed: "✅ Video analizado con éxito!",
                folderSelected: "✅ Carpeta de salida seleccionada!",
                processingComplete: "🎉 Procesamiento completado!",
                analyzing: "🔍 Analizando video...",
                error: "❌ Error:",
                clips: "clips creados con Saturn",
                qualityMedium: "🎯 Equilibrada (recomendada)",
                qualityLow: "⚡ Rápida (archivos ligeros)",
                qualityHigh: "💎 Alta calidad",
                qualityMax: "🔥 Máxima (muy pesada)",
                resolutionOriginal: "📺 Original",
                resolution1080p: "🎬 1080p (Full HD)",
                resolution720p: "📱 720p (HD)",
                resolution480p: "💾 480p (compacto)",
                formatMp4: "🎥 MP4 (universal)",
                formatWebm: "🌐 WebM (más pequeño)",
                formatAvi: "📼 AVI (clásico)",
                discordText: "Unirse a la comunidad",
                settingsText: "Configuración",
                settingsPageTitle: "⚙️ Configuración",
                backBtn: "← Atrás",
                versionInfoTitle: "📋 Información de versión",
                currentVersionTitle: "Versión actual",
                releaseInfoTitle: "Info de lanzamiento",
                changelogTitle: "🆕 Novedades v1.1.0",
                updateSectionTitle: "🔄 Actualizaciones",
                checkUpdateText: "Buscar actualizaciones",
                dangerZoneTitle: "⚠️ Zona peligrosa",
                uninstallText: "Desinstalar Saturn",
                uninstallWarning: "Esto eliminará completamente Saturn de tu computadora. Tus videos procesados no se eliminarán."
            },
            it: {
                subtitle: "Taglia i tuoi video lunghi in clip di durata determinata",
                selectVideo: "1. Seleziona il tuo video",
                selectText: "Clicca per selezionare un video",
                formatsText: "MP4, AVI, MKV, MOV, WebM...",
                outputFolder: "2. Cartella di output",
                browse: "📁 Sfoglia",
                chooseSave: "Scegli dove salvare...",
                clipDuration: "3. Durata per clip (secondi)",
                quality: "4. Opzioni di qualità",
                videoQuality: "Qualità video",
                resolution: "Risoluzione",
                format: "Formato di output",
                processText: "Taglia video",
                progressTitle: "🪐 Saturn in azione",
                resultsTitle: "✅ Clip generati",
                openFolder: "📂 Apri cartella",
                newProject: "🔄 Nuovo progetto",
                clip: "Clip",
                play: "▶️ Riproduci",
                locate: "📂 Mostra",
                appReady: "🪐 Saturn pronto - Seleziona un video per iniziare",
                videoAnalyzed: "✅ Video analizzato con successo!",
                folderSelected: "✅ Cartella di output selezionata!",
                processingComplete: "🎉 Elaborazione completata!",
                analyzing: "🔍 Analizzando video...",
                error: "❌ Errore:",
                clips: "clip creati con Saturn",
                qualityMedium: "🎯 Equilibrata (consigliata)",
                qualityLow: "⚡ Veloce (file leggeri)",
                qualityHigh: "💎 Alta qualità",
                qualityMax: "🔥 Massima (molto pesante)",
                resolutionOriginal: "📺 Originale",
                resolution1080p: "🎬 1080p (Full HD)",
                resolution720p: "📱 720p (HD)",
                resolution480p: "💾 480p (compatto)",
                formatMp4: "🎥 MP4 (universale)",
                formatWebm: "🌐 WebM (più piccolo)",
                formatAvi: "📼 AVI (classico)",
                discordText: "Unisciti alla comunità",
                settingsText: "Impostazioni",
                settingsPageTitle: "⚙️ Impostazioni",
                backBtn: "← Indietro",
                versionInfoTitle: "📋 Informazioni versione",
                currentVersionTitle: "Versione attuale",
                releaseInfoTitle: "Info rilascio",
                changelogTitle: "🆕 Novità v1.1.0",
                updateSectionTitle: "🔄 Aggiornamenti",
                checkUpdateText: "Cerca aggiornamenti",
                dangerZoneTitle: "⚠️ Zona pericolosa",
                uninstallText: "Disinstalla Saturn",
                uninstallWarning: "Questo rimuoverà completamente Saturn dal tuo computer. I tuoi video elaborati non verranno eliminati."
            }
        };

        const qualityTranslations = {
            'low': { fr: 'rapide', en: 'fast', es: 'rápida', it: 'veloce' },
            'medium': { fr: 'équilibrée', en: 'balanced', es: 'equilibrada', it: 'equilibrata' },
            'high': { fr: 'haute', en: 'high', es: 'alta', it: 'alta' },
            'max': { fr: 'maximum', en: 'maximum', es: 'máxima', it: 'massima' }
        };
        
        const resolutionTranslations = {
            'original': { fr: 'originale', en: 'original', es: 'original', it: 'originale' },
            '1080p': { fr: '1080p', en: '1080p', es: '1080p', it: '1080p' },
            '720p': { fr: '720p', en: '720p', es: '720p', it: '720p' },
            '480p': { fr: '480p', en: '480p', es: '480p', it: '480p' }
        };

        let currentLanguage = 'en';
        let currentVideoFile = null;
        let currentOutputDir = null;
        let processedClips = [];

        const fileDisplay = document.getElementById('fileDisplay');
        const outputPath = document.getElementById('outputPath');
        const processBtn = document.getElementById('processBtn');
        const progressContainer = document.getElementById('progressContainer');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');
        const progressStats = document.getElementById('progressStats');
        const results = document.getElementById('results');
        const clipsGrid = document.getElementById('clipsGrid');
        const status = document.getElementById('status');

        function t(key) {
            return translations[currentLanguage][key] || translations['en'][key] || key;
        }

        function translateQuality(quality) {
            return qualityTranslations[quality] ? qualityTranslations[quality][currentLanguage] : quality;
        }
        
        function translateResolution(resolution) {
            return resolutionTranslations[resolution] ? resolutionTranslations[resolution][currentLanguage] : resolution;
        }

        function showStatus(message, type = 'success') {
            status.textContent = message;
            status.className = 'status ' + type;
            status.style.display = 'block';
            
            if (type === 'success') {
                setTimeout(() => status.style.display = 'none', 5000);
            }
        }

        function hideStatus() {
            status.style.display = 'none';
        }

        // Navigation entre pages
        function showSettingsPage() {
            document.getElementById('mainPage').style.display = 'none';
            document.getElementById('settingsPage').style.display = 'block';
        }

        function showMainPage() {
            document.getElementById('mainPage').style.display = 'block';
            document.getElementById('settingsPage').style.display = 'none';
        }

        // Vérification des mises à jour
        async function checkForUpdates() {
            const checkBtn = document.getElementById('checkUpdateBtn');
            const updateStatus = document.getElementById('updateStatusText');
            
            checkBtn.disabled = true;
            checkBtn.innerHTML = '🔄 <span>Checking...</span>';
            updateStatus.textContent = 'Checking for updates...';
            
            try {
                const updateInfo = await ipcRenderer.invoke('check-for-updates');
                
                if (updateInfo.error) {
                    updateStatus.textContent = '❌ ' + updateInfo.error;
                    updateStatus.style.color = '#ef4444';
                } else if (updateInfo.updateAvailable) {
                    updateStatus.innerHTML = `🆕 Update available: v${updateInfo.latestVersion}<br>
                        <small>Current: v${updateInfo.currentVersion}</small>`;
                    updateStatus.style.color = 'rgb(16, 185, 162)';
                    
                    checkBtn.innerHTML = '⬇️ <span>Download Update</span>';
                    checkBtn.onclick = () => downloadUpdate(updateInfo.downloadUrl);
                } else {
                    updateStatus.textContent = `✅ You have the latest version (v${updateInfo.currentVersion})`;
                    updateStatus.style.color = 'rgb(16, 185, 162)';
                }
                
            } catch (error) {
                updateStatus.textContent = '❌ Failed to check for updates';
                updateStatus.style.color = '#ef4444';
            }
            
            checkBtn.disabled = false;
            if (!updateInfo || !updateInfo.updateAvailable) {
                checkBtn.innerHTML = '🔍 <span>' + t('checkUpdateText') + '</span>';
            }
        }

        async function downloadUpdate(downloadUrl) {
            const updateProgress = document.getElementById('updateProgress');
            const downloadFill = document.getElementById('downloadFill');
            const downloadStats = document.getElementById('downloadStats');
            const downloadText = document.getElementById('downloadText');
            
            updateProgress.style.display = 'block';
            
            try {
                await ipcRenderer.invoke('download-update', downloadUrl);
            } catch (error) {
                downloadText.textContent = '❌ Download failed: ' + error.message;
                downloadText.style.color = '#ef4444';
            }
        }

        // Désinstallation
        async function uninstallSaturn() {
            try {
                const result = await ipcRenderer.invoke('uninstall-saturn');
                if (result && !result.cancelled) {
                    showStatus('🗑️ Saturn is being uninstalled...', 'info');
                }
            } catch (error) {
                showStatus('❌ Failed to uninstall: ' + error.message, 'error');
            }
        }

        // Écouteur pour le progrès de téléchargement
        ipcRenderer.on('download-progress', (event, data) => {
            const downloadFill = document.getElementById('downloadFill');
            const downloadStats = document.getElementById('downloadStats');
            const downloadText = document.getElementById('downloadText');
            
            const progress = parseFloat(data.progress);
            downloadFill.style.width = progress + '%';
            downloadStats.textContent = progress.toFixed(1) + '%';
            
            const downloaded = (data.downloaded / (1024 * 1024)).toFixed(1);
            const total = (data.totalSize / (1024 * 1024)).toFixed(1);
            downloadText.textContent = `Downloaded: ${downloaded} MB / ${total} MB`;
        });

        function checkCanProcess() {
            processBtn.disabled = !(currentVideoFile && currentOutputDir);
        }

        function formatDuration(seconds) {
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = Math.floor(seconds % 60);
            
            if (hours > 0) {
                return hours + 'h ' + minutes + 'm ' + secs + 's';
            } else if (minutes > 0) {
                return minutes + 'm ' + secs + 's';
            } else {
                return secs + 's';
            }
        }

        function updateSelectOptions() {
            const videoQualitySelect = document.getElementById('videoQuality');
            const resolutionSelect = document.getElementById('resolution');
            const formatSelect = document.getElementById('outputFormat');
            
            const currentQualityValue = videoQualitySelect.value;
            const currentResolutionValue = resolutionSelect.value;
            const currentFormatValue = formatSelect.value;
            
            videoQualitySelect.innerHTML = 
                '<option value="medium">' + t('qualityMedium') + '</option>' +
                '<option value="low">' + t('qualityLow') + '</option>' +
                '<option value="high">' + t('qualityHigh') + '</option>' +
                '<option value="max">' + t('qualityMax') + '</option>';
            videoQualitySelect.value = currentQualityValue;
            
            resolutionSelect.innerHTML = 
                '<option value="original">' + t('resolutionOriginal') + '</option>' +
                '<option value="1080p">' + t('resolution1080p') + '</option>' +
                '<option value="720p">' + t('resolution720p') + '</option>' +
                '<option value="480p">' + t('resolution480p') + '</option>';
            resolutionSelect.value = currentResolutionValue;
            
            formatSelect.innerHTML = 
                '<option value="mp4">' + t('formatMp4') + '</option>' +
                '<option value="webm">' + t('formatWebm') + '</option>' +
                '<option value="avi">' + t('formatAvi') + '</option>';
            formatSelect.value = currentFormatValue;
        }

        function updateClipsDisplay() {
            clipsGrid.innerHTML = '';
            
            processedClips.forEach(clip => {
                const clipCard = document.createElement('div');
                clipCard.className = 'clip-card';
                
                const formatEmoji = { 'mp4': '🎥', 'webm': '🌐', 'avi': '📼' };
                
                clipCard.innerHTML = 
                    '<div class="clip-header">' +
                        '<div class="clip-title">' + (formatEmoji[clip.format] || '🎬') + ' ' + t('clip') + ' ' + clip.id + '</div>' +
                        '<div class="clip-duration">' + Math.round(clip.duration) + 's</div>' +
                    '</div>' +
                    '<div class="clip-info">' +
                        '💾 ' + clip.size + '<br>' +
                        '✨ ' + translateQuality(clip.quality) + ' • ' + translateResolution(clip.resolution) + '<br>' +
                        '🎥 ' + clip.format.toUpperCase() +
                    '</div>' +
                    '<div class="clip-actions">' +
                        '<button class="btn btn-small" onclick="playVideo(\'' + clip.path.replace(/\\/g, '\\\\') + '\')">' + t('play') + '</button>' +
                        '<button class="btn btn-small btn-success" onclick="showInExplorer(\'' + clip.path.replace(/\\/g, '\\\\') + '\')">' + t('locate') + '</button>' +
                    '</div>';
                
                clipsGrid.appendChild(clipCard);
            });
        }

        function resetFileDisplay() {
            fileDisplay.innerHTML = 
                '<div style="text-align: center;">' +
                    '<div style="font-size: 3.5rem; margin-bottom: 15px;">🎬</div>' +
                    '<div style="font-size: 1.3rem; margin-bottom: 8px;">' + t('selectText') + '</div>' +
                    '<div style="font-size: 1rem; opacity: 0.7;">' + t('formatsText') + '</div>' +
                '</div>';
        }

        function updateTexts() {
            // Page principale
            document.getElementById('subtitle').textContent = t('subtitle');
            document.getElementById('selectVideoLabel').textContent = t('selectVideo');
            document.getElementById('outputFolderLabel').textContent = t('outputFolder');
            document.getElementById('browseBtn').innerHTML = t('browse');
            document.getElementById('clipDurationLabel').textContent = t('clipDuration');
            document.getElementById('qualityLabel').textContent = t('quality');
            document.getElementById('videoQualityLabel').textContent = t('videoQuality');
            document.getElementById('resolutionLabel').textContent = t('resolution');
            document.getElementById('formatLabel').textContent = t('format');
            document.getElementById('processText').textContent = t('processText');
            document.getElementById('progressTitle').textContent = t('progressTitle');
            document.getElementById('resultsTitle').textContent = t('resultsTitle');
            document.getElementById('openFolderBtn').innerHTML = t('openFolder');
            document.getElementById('newProjectBtn').innerHTML = t('newProject');
            document.getElementById('outputPath').placeholder = t('chooseSave');
            document.getElementById('discordText').textContent = t('discordText');
            document.getElementById('settingsText').textContent = t('settingsText');
            
            // Page paramètres
            document.getElementById('settingsPageTitle').textContent = t('settingsPageTitle');
            document.getElementById('backBtn').innerHTML = t('backBtn');
            document.getElementById('versionInfoTitle').textContent = t('versionInfoTitle');
            document.getElementById('currentVersionTitle').textContent = t('currentVersionTitle');
            document.getElementById('releaseInfoTitle').textContent = t('releaseInfoTitle');
            document.getElementById('changelogTitle').textContent = t('changelogTitle');
            document.getElementById('updateSectionTitle').textContent = t('updateSectionTitle');
            document.getElementById('checkUpdateText').textContent = t('checkUpdateText');
            document.getElementById('dangerZoneTitle').textContent = t('dangerZoneTitle');
            document.getElementById('uninstallText').textContent = t('uninstallText');
            document.getElementById('uninstallWarning').textContent = t('uninstallWarning');
            
            updateSelectOptions();
            
            if (results.style.display !== 'none' && processedClips.length > 0) {
                updateClipsDisplay();
            }
            
            if (!fileDisplay.classList.contains('has-file')) {
                resetFileDisplay();
            }
        }

        // Reste des fonctions existantes...
        async function selectVideo() {
            try {
                const filePath = await ipcRenderer.invoke('select-video-file');
                
                if (filePath) {
                    showStatus(t('analyzing'), 'info');
                    const videoInfo = await ipcRenderer.invoke('get-video-info', filePath);
                    
                    currentVideoFile = { path: filePath, info: videoInfo };
                    
                    fileDisplay.classList.add('has-file');
                    fileDisplay.innerHTML = 
                        '<div style="text-align: center;">' +
                            '<div style="font-size: 3.5rem; margin-bottom: 15px;">🎬</div>' +
                            '<div style="font-size: 1.4rem; font-weight: 600; margin-bottom: 8px; color: rgb(16, 185, 162);">' + videoInfo.filename + '</div>' +
                            '<div style="font-size: 1.1rem; opacity: 0.8;">' + formatDuration(videoInfo.duration) + ' • ' + videoInfo.width + 'x' + videoInfo.height + '</div>' +
                        '</div>';
                    
                    checkCanProcess();
                    showStatus(t('videoAnalyzed'));
                }
            } catch (error) {
                showStatus(t('error') + ' ' + error.message, 'error');
            }
        }

        async function selectOutputFolder() {
            try {
                const folderPath = await ipcRenderer.invoke('select-output-folder');
                
                if (folderPath) {
                    currentOutputDir = folderPath;
                    outputPath.value = folderPath;
                    checkCanProcess();
                    showStatus(t('folderSelected'));
                }
            } catch (error) {
                showStatus(t('error') + ' ' + error.message, 'error');
            }
        }

        async function startProcessing() {
            if (!currentVideoFile || !currentOutputDir) return;
            
            processBtn.disabled = true;
            progressContainer.style.display = 'block';
            results.style.display = 'none';
            hideStatus();
            
            try {
                const clipDuration = parseInt(document.getElementById('clipDuration').value);
                const videoQuality = document.getElementById('videoQuality').value;
                const resolution = document.getElementById('resolution').value;
                const outputFormat = document.getElementById('outputFormat').value;
                
                const result = await ipcRenderer.invoke('split-video', {
                    filePath: currentVideoFile.path,
                    outputDir: currentOutputDir,
                    clipDuration: clipDuration,
                    videoQuality: videoQuality,
                    resolution: resolution,
                    outputFormat: outputFormat
                });
                
                displayResults(result);
                
                progressContainer.style.display = 'none';
                results.style.display = 'block';
                processBtn.disabled = false;
                
                showStatus(t('processingComplete') + ' ' + result.clips.length + ' ' + t('clips'));
                
            } catch (error) {
                showStatus(t('error') + ' ' + error.message, 'error');
                progressContainer.style.display = 'none';
                processBtn.disabled = false;
            }
        }

        function displayResults(result) {
            processedClips = result.clips;
            updateClipsDisplay();
        }

        async function playVideo(clipPath) {
            await ipcRenderer.invoke('play-video', clipPath);
        }

        async function showInExplorer(clipPath) {
            await ipcRenderer.invoke('open-folder', clipPath);
        }

        async function openOutputFolder() {
            if (currentOutputDir) {
                await ipcRenderer.invoke('open-folder', currentOutputDir);
            }
        }

        function resetApp() {
            currentVideoFile = null;
            currentOutputDir = null;
            processedClips = [];
            
            fileDisplay.classList.remove('has-file');
            resetFileDisplay();
            
            outputPath.value = '';
            progressContainer.style.display = 'none';
            results.style.display = 'none';
            
            checkCanProcess();
            hideStatus();
        }

        function toggleLanguageDropdown() {
            const dropdown = document.getElementById('languageDropdown');
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
        }

        function changeLanguage(lang) {
            currentLanguage = lang;
            
            const flags = { 'fr': '🥐', 'en': '🇬🇧', 'es': '🌮', 'it': '🍕' };
            
            document.getElementById('currentLangFlag').textContent = flags[lang];
            document.getElementById('currentLangCode').textContent = lang.toUpperCase();
            
            document.querySelectorAll('.language-option').forEach(option => option.classList.remove('active'));
            event.target.closest('.language-option').classList.add('active');
            
            document.getElementById('languageDropdown').style.display = 'none';
            
            updateTexts();
            
            const langNames = {'fr': 'Français', 'en': 'English', 'es': 'Español', 'it': 'Italiano'};
            showStatus('🌐 ' + langNames[lang]);
        }

        ipcRenderer.on('progress-update', (event, data) => {
            progressFill.style.width = data.overallProgress + '%';
            progressText.textContent = data.currentClip;
            progressStats.textContent = Math.round(data.overallProgress) + '%';
        });

        document.addEventListener('click', function(event) {
            const selector = document.querySelector('.language-selector');
            const dropdown = document.getElementById('languageDropdown');
            
            if (!selector.contains(event.target)) {
                dropdown.style.display = 'none';
            }
        });

        updateTexts();
        showStatus(t('appReady'));
    </script>
</body>
</html>